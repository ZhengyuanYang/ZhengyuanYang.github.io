

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/myico.png">
  <link rel="icon" href="/img/myico.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="This article discuss about basic knowledge of causal inference">
<meta property="og:type" content="article">
<meta property="og:title" content="Potential Outcome Framework">
<meta property="og:url" content="http://example.com/2022/11/07/potential-outcome/index.html">
<meta property="og:site_name" content="ZY&#39;s Blog">
<meta property="og:description" content="This article discuss about basic knowledge of causal inference">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2022/11/07/potential-outcome/1.PNG">
<meta property="og:image" content="http://example.com/2022/11/07/potential-outcome/2.PNG">
<meta property="og:image" content="http://example.com/2022/11/07/potential-outcome/3.PNG">
<meta property="article:published_time" content="2022-11-08T03:29:57.000Z">
<meta property="article:modified_time" content="2022-12-03T02:15:51.782Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Distribution">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/2022/11/07/potential-outcome/1.PNG">
  
  
  <title>Potential Outcome Framework - ZY&#39;s Blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.0.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>ZY&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About me
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Potential Outcome Framework">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-11-07 19:29" pubdate>
        November 7, 2022 pm
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      4.7k 字
    </span>
  

  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Potential Outcome Framework</h1>
            
            <div class="markdown-body">
              <h1 id="introduction-of-potential-outcome-framework">Introduction of Potential Outcome Framework</h1>
<h2 id="potential-outcomes-framework">1. Potential Outcomes Framework</h2>
<p>The Potential Outcomes framework is a series of notation widely used in causal inference.</p>
<h3 id="conditioning-v.s.-intervening">1.1 Conditioning v.s. Intervening</h3>
<p>In statistics, conditioning and intervening is two different concepts.</p>
<p><strong>Conditioning</strong>: Segmenting a dataset into subset bu applying conditions on variables</p>
<p><strong>Intervening:</strong> Intervene a process with certain treatment, so that every unit is affected by treatment variable</p>
<p><img src="/2022/11/07/potential-outcome/1.PNG" srcset="/img/loading.gif" lazyload></p>
<p>we use the <strong>do</strong> operands the represent that we intervene a process. Let Y donate the outcome statistics of the process, the probability of Y = y under a intervention such that T=t is noted as <span class="math inline">\(P(Y=y|do(T=t))\)</span> or <span class="math inline">\(P(y|do(t))\)</span></p>
<p>When there exists confounder in the process, the conditional probability does not equal the interventional probability: <span class="math display">\[
P (Y|do(t),X) = E_X[P(Y|T=t,X)] \ne  P(Y|T=t,X)
\]</span></p>
<h3 id="potential-outcomes">1.2 Potential Outcomes</h3>
<p>Suppose we want to evaluate the cause effect of a pill on a single person.</p>
<p><img src="/2022/11/07/potential-outcome/2.PNG" srcset="/img/loading.gif" lazyload></p>
<p>Let T denotes whether this person take a pill, Y denotes the degree that his headache is relieved after taking the pill. The Cause Effect can be noted as: <span class="math display">\[
Y|do(T=1) \ - Y|do( T =0) = Y(1)-Y(0)
\]</span> The cause effect of a treatment on a single unit is called <strong>Individual Treatment Effect</strong>(ITE)</p>
<p>A problem of evaluating the effect this way is that for a single person we can only observe Y for once. If we intervene the treatment so that T = 1, we won't obtain any observations about Y(0).</p>
<p>In such case, we call Y(1),Y(0) the potential outcomes under T. A potential outcome is the outcome of the statistics under our potential treatment.</p>
<p>For a specific unit, suppose we applied treatment T=t on it, we call the observed outcome <span class="math inline">\(Y^F= Y(T=t)\)</span> the factual outcome. The potential outcome that not applying T=t, <span class="math inline">\(Y^{CF} = Y(T\ne t)\)</span> is called the counterfactual outcome. <span class="math inline">\(Y^{CF }(T =1) = Y^F(T=0)\)</span></p>
<h3 id="average-treatment-effect">1.3 Average Treatment Effect</h3>
<p>Due to the problem discussed in 1.2, we usually cannot get the ITE of a treatment directly. However, if we do not put specific emphasis on the effect of individual, we can obtain the overall effect size by calculating the <strong>Average Treatment Effect(</strong>ATE) of a treatment on a population: <span class="math display">\[
ATE = \Epsilon[ITE] =E[Y^F(T=1)] - E[Y^{CF}(T=1)] = E[Y(1)] - E[Y(0)]
\]</span> Note that when there are any confounders X so that <span class="math inline">\((Y(1),Y(0)) \not \! \perp \!\!\! \perp T\)</span>: <span class="math display">\[
E[Y(1)] = E_X[E[Y|T=1,X=x]] \ne E[Y|T=1]
\]</span> In such case, the ATE is now: <span class="math display">\[
ATE =E_X[E[Y|T=1,X=x]-E[Y|T=0,X=x]]=E_X[E[Y|T=1,X=x]] - E_X[E[Y|T=0,X=x]]
\]</span> In most real application cases, there are multiple confounders in the causal inference process. To estimate the ATE, we need to "block" the effects of confounder. We call the treatment effect under a group condidsa</p>
<h3 id="basic-assumptions-about-potential-outcomes">1.4 Basic Assumptions about Potential Outcomes</h3>
<p><strong>Stable Unit Treatment Value Assumption(SUTVA)</strong>: The potential outcome of any unit won't be changed by treatment on other units. This assumption emphasize the independency of units</p>
<p><strong>Positivity Assumption</strong>: For units of any possible values of background variable, any assigned treatment is possible. <span class="math display">\[
P(T=t|X=x) \in (0,1) \quad \forall t\ and \ x
\]</span> <strong>Consistency Assumption </strong>: If T=t is applied on a group of unit, then the outcomes of all units in that group would be Y(T=t). <span class="math display">\[
T = t \Rightarrow Y=Y(t)
\]</span> The consistency assumption make sure we have $Y(t) = Y|T=t $ when there's no confounders</p>
<p><strong>Ignorability Assumption</strong>: The determination of the treatment T is independent to the potential outcomes: <span class="math display">\[
(Y(1),Y(0)) \perp \!\!\! \perp T
\]</span> Under the Ignorability Assumption: <span class="math display">\[
E[Y(1)] = E[Y(1)|T=1] = E[Y| T=1]
\]</span> The Ignorability Assumption is usually considered satisfied when we conduct a random control trail. If we randomized the determination of the treatment, this assumption implies the influence of the confounders are blocked. However, in a non-experimental context, since T is not randomized, the influence of the confounder still exists, and the Ignorability Assumption is not satisfied. In such scenarios, we would weaken Ignorability Assumption into the following assumption.</p>
<p><strong>Conditional Ignorability Assumption</strong>: Given background variables X, the determination of the treatment T is independent to the potential outcomes <span class="math display">\[
(Y(1),Y(0))|X \perp \!\!\! \perp T
\]</span> Under the conditional Conditional Ignorability Assumption: <span class="math display">\[
E[Y(1)|X=x_i] = E[Y(1)|T=1,X=x_i] = E[Y| T=1,X=x_i]
\]</span> With these assumption, we can make the following statement for a causal inference process:</p>
<ul>
<li><p>The SUTVA, Positivity and Consistency should always be satisfied</p></li>
<li><p>If a RCT is conducted, we can regard as <span class="math inline">\((Y(1),Y(0)) \perp \!\!\! \perp T\)</span>, and The ignorability assumption can be considered satisfied. Thus a RCT is a best solution for causal inference</p></li>
<li><p>If RCT is not implementable, we can condition on the confounder to satisfy the conditional ignorability assumption and estimate the CATE, then we may estimate the distribution of the confounders and calculate the exception of the CATE to obtain ATE</p>
<p><img src="/2022/11/07/potential-outcome/3.PNG" srcset="/img/loading.gif" lazyload></p></li>
</ul>
<h3 id="randomized-control-trail">1.5 Randomized Control Trail</h3>
<p>A Randomized Control Trail is a trail that whether to apply a treatment on a unit is decided only by a coin flip(A random event). Since the determination of each unit is randomized, we can state that Ignorability Assumption is satisfied if there are no omitted confounders, and <span class="math inline">\((Y(1),Y(0)) \perp \!\!\! \perp T\)</span></p>
<p>Under such assumption: <span class="math display">\[
E[Y(1)] = E[Y(1)|T=1] = E[Y^F |T=1]
\]</span></p>
<p><span class="math display">\[
E[Y^{CF}(T= 1)] = E[ Y^F (T= 0)] = E[Y|T=0]
\]</span></p>
<p><span class="math display">\[
ATE = E[Y(1)] - E[Y(0)] = E[Y|T=1] - E[Y|T=0]
\]</span></p>
<p>Thus, we can estimate the ATE through a RCT. An RCT make the determination of the treatment randomized and blocked the influence of the confounders</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Causal-Inference/">Causal Inference</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Distribution/">Distribution</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                     All articles in this blog adpot <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 agreement unless otherwise specified</a>, please indicate the source！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/11/10/structual-causal-model/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Structural Causal Model</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/11/07/basic-causal-inference/">
                        <span class="hidden-mobile">Introduction of Causal Inference</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <!-- <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> --> <i class="iconfont icon-bug"></i> <a href="/report/" target="_blank" rel="nofollow noopener"><span>Report Bug</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        loader: {
          load: ['ui/lazy']
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
